(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[1],{10:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return i}));var r=n(84),a=n.n(r).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"65933dcc-6afe-43bc-af50-63aed10a4c85"}}),s={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a.get("users?page=".concat(e,"&count=").concat(t))},follow:function(e){return a.post("follow/".concat(e))},unfollow:function(e){return a.delete("follow/".concat(e))},getProfileUser:function(e){return console.log("Please use profileAPI ti get users."),c.getUserProfile(e)},getFriends:function(){return a.get("users?&friend=".concat(!0))}},c={getUserProfile:function(e){return a.get("profile/".concat(e))},getUserStatus:function(e){return a.get("profile/status/".concat(e))},updateUserStatus:function(e){return a.put("profile/status",{status:e})}},i={authMe:function(){return a.get("auth/me")},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return a.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},logout:function(){return a.delete("auth/login")}}},138:function(e,t,n){},224:function(e,t,n){},227:function(e,t,n){"use strict";n.r(t);var r,a=n(0),s=n.n(a),c=(n(138),function(e){e&&e instanceof Function&&n.e(9).then(n.bind(null,320)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))}),i=n(24),u=n(56),o=n(74),l=n(42),f=n(25),d=n(85),j=n(86),b=n(83),p=n(3),O=n(5),h=n.n(O),g=n(8);!function(e){e.SET_INITIALIZED_SUCCESS="SET_INITIALIZED_SUCCESS"}(r||(r={}));var m={initialized:!1},S=n(15),v=Object(i.combineReducers)({profilePage:u.b,dialogsPage:o.a,usersPage:l.a,auth:f.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_INITIALIZED_SUCCESS:return Object(p.a)(Object(p.a)({},e),{},{initialized:!0});default:return e}},form:b.a}),_=Object(i.createStore)(v,Object(j.composeWithDevTools)(Object(i.applyMiddleware)(d.a))),E=S.d,T=_;window.__store__=_;var x=n(33),w=n.n(x),N=n(9),I=(n(224),n(7)),P=n.n(I),U=n(1),C=function(){return Object(U.jsxs)("nav",{className:P.a.nav,children:[Object(U.jsx)("div",{className:P.a.item,children:Object(U.jsx)(N.b,{to:"/profile",activeClassName:P.a.active,children:"Profile"})}),Object(U.jsx)("div",{className:P.a.item,children:Object(U.jsx)(N.b,{to:"/users",activeClassName:P.a.active,children:"Users"})}),Object(U.jsx)("div",{className:"".concat(P.a.item," ").concat(P.a.active),children:Object(U.jsx)(N.b,{to:"/dialogs",activeClassName:P.a.active,children:" Dialogs"})}),Object(U.jsx)("div",{className:P.a.item,children:Object(U.jsx)(N.b,{to:"/news",activeClassName:P.a.active,children:"News"})}),Object(U.jsx)("div",{className:P.a.item,children:Object(U.jsx)(N.b,{to:"/music",activeClassName:P.a.active,children:"Music"})}),Object(U.jsx)("div",{className:P.a.item,children:Object(U.jsx)(N.b,{to:"/settings",activeClassName:P.a.active,children:"Settings"})}),Object(U.jsxs)("div",{children:[Object(U.jsx)(N.b,{to:"/friends",className:P.a.friendName,children:"Friends"}),Object(U.jsx)("div",{className:P.a.grid,children:" "})]})]})},y=n(89),A=n.n(y),R=function(){return Object(U.jsx)("footer",{className:A.a.footer,children:"footer"})},L=n(6),F=n(53),G=n.n(F),D=function(){return Object(U.jsx)("div",{children:Object(U.jsx)("div",{className:G.a.news,children:Object(U.jsx)("div",{className:G.a.newsTitle,children:"News"})})})},k=function(){return Object(U.jsx)("div",{children:"Music"})},H=function(){return Object(U.jsx)("div",{children:"Settings"})},M=n(61),W=n(62),z=n(64),B=n(63),Z=n(43),J=n.n(Z),K=function(e){var t=e.login,n=e.isAuth,r=e.logout;return Object(U.jsxs)("header",{className:J.a.header,children:[Object(U.jsx)("img",{src:"https://i1.u-mama.ru/111/87b/b3d/3f034929b4556f4a747ca0fd40c29f08.jpg",alt:"animated-boy"}),Object(U.jsx)("div",{className:J.a.loginBlock,children:n?Object(U.jsxs)("div",{className:J.a.loginBlock,children:[t,Object(U.jsx)("button",{onClick:r,children:"logout"})]}):Object(U.jsx)(N.b,{to:"/login",children:"Login"})})]})},Q=function(e){Object(z.a)(n,e);var t=Object(B.a)(n);function n(){return Object(M.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"render",value:function(){return Object(U.jsx)(K,Object(p.a)({},this.props))}}]),n}(s.a.Component),q=Object(S.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:f.d})(Q),V=n(41),X=n(81),Y=function(e){var t=Object(S.c)(),n=Object(S.d)((function(e){return e.usersPage.friends}));return t(Object(l.c)()),Object(U.jsxs)("div",{children:[n.map((function(t){return Object(U.jsx)(X.a,{user:t,followingInProgress:e.followingInProgress,follow:e.follow,unfollow:e.unfollow})})),"friends"]})};function $(e){return function(t){var n=Object.assign({},t);return Object(U.jsx)(s.a.Suspense,{fallback:Object(U.jsx)(V.a,{}),children:Object(U.jsx)(e,Object(p.a)({},n))})}}var ee=s.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,321))})),te=s.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,323))})),ne=s.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,324))})),re=s.a.lazy((function(){return Promise.all([n.e(7),n.e(8)]).then(n.bind(null,325))})),ae=function(){var e=Object(S.c)(),t=E((function(e){return e.app}));return Object(a.useEffect)((function(){e(function(){var e=Object(g.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t(Object(f.b)()),e.next=3,Promise.all([n]);case 3:t({type:"SET_INITIALIZED_SUCCESS"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),t.initialized?Object(U.jsxs)("div",{className:"App",children:[Object(U.jsx)(q,{}),Object(U.jsx)(C,{}),Object(U.jsxs)("div",{className:"App-wrapper-content",children:[Object(U.jsx)(L.b,{path:"/profile/:userid?",render:$(te)}),Object(U.jsx)(L.b,{path:"/dialogs",render:$(ne)}),Object(U.jsx)(L.b,{path:"/users",render:$(re)}),Object(U.jsx)(L.b,{path:"/login",render:$(ee)}),Object(U.jsx)(L.b,{path:"/news",component:D}),Object(U.jsx)(L.b,{path:"/music",component:k}),Object(U.jsx)(L.b,{path:"/settings",component:H}),Object(U.jsx)(L.b,{path:"/friends",component:Y})]}),Object(U.jsx)(R,{})]}):Object(U.jsx)(V.a,{})};w.a.render(Object(U.jsx)(s.a.StrictMode,{children:Object(U.jsx)(N.a,{children:Object(U.jsx)(S.a,{store:T,children:Object(U.jsx)(ae,{})})})}),document.getElementById("root")),c()},25:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return b})),n.d(t,"a",(function(){return p}));var r,a=n(3),s=n(5),c=n.n(s),i=n(8),u=n(10),o=n(44);!function(e){e.SET_USER_DATA="auth/SET_USER_DATA"}(r||(r={}));var l={userId:null,email:null,login:null,isAuth:!1},f=function(e,t,n,r){return{type:"auth/SET_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:r}}},d=function(){return function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.authMe();case 2:return 0===(n=e.sent).data.resultCode&&(r=n.data.data,a=r.id,s=r.email,i=r.login,t(f(a,s,i,!0))),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(e,t,n,r){return function(){var a=Object(i.a)(c.a.mark((function a(s){var i,l;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u.a.login(e,t,n,r);case 2:0===(i=a.sent).data.resultCode?s(d()):(l=i.data.messages.length>0?i.data.messages[0]:"some error",s(Object(o.a)("login",{_error:l})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},b=function(){return function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.logout();case 2:0===e.sent.data.resultCode&&t(f(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SET_USER_DATA:return Object(a.a)(Object(a.a)({},e),t.payload);default:return e}}},27:function(e,t,n){},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n.p+"static/media/Bean Eater-1.2s-197px.7923c0b5.svg",a=(n(0),n(1)),s=function(){return Object(a.jsx)("img",{style:{position:"absolute",top:"40%",left:"50%"},src:r,alt:"Packman"})}},42:function(e,t,n){"use strict";n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return S})),n.d(t,"f",(function(){return v}));var r,a=n(26),s=n(3),c=n(5),i=n.n(c),u=n(8),o=n(10),l=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(s.a)(Object(s.a)({},e),r):e}))};!function(e){e.FOLLOW="users/FOLLOW",e.UNFOLLOW="users/UNFOLLOW",e.SET_USERS="users/SET_USERS",e.SET_CURRENT_PAGE="users/SET_CURRENT_PAGE",e.SET_TOTAL_USERS_COUNT="users/SET_TOTAL_USERS_COUNT",e.TOGGLE_IS_FETCHING="users/TOGGLE_IS_FETCHING",e.TOGGLE_IS_FETCHING_PROGRESS="users/TOGGLE_IS_FETCHING_PROGRESS",e.SET_FRIENDS="users/SET_FRIENDS"}(r||(r={}));var f={users:[],pageSize:20,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[],friends:[]},d=function(e){return{type:"users/FOLLOW",userId:e}},j=function(e){return{type:"users/UNFOLLOW",userId:e}},b=function(e){return{type:"users/SET_CURRENT_PAGE",currentPage:e}},p=function(e){return{type:"users/TOGGLE_IS_FETCHING",isFetching:e}},O=function(e,t){return{type:"users/TOGGLE_IS_FETCHING_PROGRESS",isFetching:e,userId:t}},h=function(e,t){return function(){var n=Object(u.a)(i.a.mark((function n(r){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(p(!0)),r(b(e)),n.next=4,o.c.getUsers(e,t);case 4:a=n.sent,r(p(!1)),r({type:"users/SET_USERS",users:a.data.items}),r({type:"users/SET_TOTAL_USERS_COUNT",count:a.data.totalCount});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},g=function(){return function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(p(!0)),e.next=3,o.c.getFriends();case 3:n=e.sent,t(p(!1)),t({type:"users/SET_FRIENDS",friends:n.data.items});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},m=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O(!0,n)),e.next=3,r(n);case 3:0===e.sent.data.resultCode&&t(a(n)),t(O(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),S=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(n,e,o.c.follow.bind(o.c),d);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(n,e,o.c.unfollow.bind(o.c),j);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.FOLLOW:return Object(s.a)(Object(s.a)({},e),{},{users:l(e.users,t.userId,"id",{followed:!0})});case r.UNFOLLOW:return Object(s.a)(Object(s.a)({},e),{},{users:l(e.users,t.userId,"id",{followed:!1})});case r.SET_USERS:return Object(s.a)(Object(s.a)({},e),{},{users:t.users});case r.SET_CURRENT_PAGE:return Object(s.a)(Object(s.a)({},e),{},{currentPage:t.currentPage});case r.SET_TOTAL_USERS_COUNT:return Object(s.a)(Object(s.a)({},e),{},{totalUsersCount:t.count});case r.TOGGLE_IS_FETCHING:return Object(s.a)(Object(s.a)({},e),{},{isFetching:t.isFetching});case r.TOGGLE_IS_FETCHING_PROGRESS:return Object(s.a)(Object(s.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(a.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});case r.SET_FRIENDS:return Object(s.a)(Object(s.a)({},e),{},{friends:t.friends});default:return e}}},43:function(e,t,n){e.exports={header:"Header_header__1qW2j",loginBlock:"Header_loginBlock__3rAmo"}},53:function(e,t,n){e.exports={news:"News_news__Q92op",newsTitle:"News_newsTitle__2sD-C"}},56:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return j})),n.d(t,"e",(function(){return b}));var r,a=n(26),s=n(3),c=n(5),i=n.n(c),u=n(8),o=n(10);!function(e){e.ADD_POST="profile/ADD_POST",e.SET_USERS_PROFILE="profile/SET_USERS_PROFILE",e.SET_STATUS="profile/SET_STATUS"}(r||(r={}));var l=function(e){return{type:"profile/ADD_POST",newPostText:e}},f=function(e){return{type:"profile/SET_STATUS",status:e}},d=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.c.getProfileUser(e);case 2:r=t.sent,n({type:"profile/SET_USERS_PROFILE",profile:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.b.getUserStatus(e);case 2:r=t.sent,n(f(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.b.updateUserStatus(e);case 2:0===t.sent.data.resultCode&&n(f(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},p={posts:[{id:1,message:"Hello bro",likeCount:0}],profile:null,status:""};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.ADD_POST:var n={id:5,message:t.newPostText,likeCount:0};return""!==t.newPostText?Object(s.a)(Object(s.a)({},e),{},{posts:[].concat(Object(a.a)(e.posts),[n])}):e;case r.SET_USERS_PROFILE:return Object(s.a)(Object(s.a)({},e),{},{profile:t.profile});case r.SET_STATUS:return Object(s.a)(Object(s.a)({},e),{},{status:t.status});case"profile/DELETE_POST":return Object(s.a)(Object(s.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});default:return e}}},7:function(e,t,n){e.exports={nav:"Navbar_nav__1RChf",item:"Navbar_item__Qin6T",active:"Navbar_active__Siz7Z",grid:"Navbar_grid__2OMsl",friendName:"Navbar_friendName__VOdSD"}},74:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r,a=n(26),s=n(3);!function(e){e.SEND_MESSAGE="dialogs/SEND_MESSAGE"}(r||(r={}));var c={dialogs:[{id:1,name:"Archi",img:"https://cs4.pikabu.ru/post_img/big/2015/03/10/5/1425968564_1301750843.jpg"},{id:2,name:"Dimich",img:"http://rasfokus.ru/images/photos/medium/71e226a2972b39c54360dfec99765e66.jpg"},{id:3,name:"The_Kot",img:"https://i1.u-mama.ru/111/87b/b3d/3f034929b4556f4a747ca0fd40c29f08.jpg"}],messages:[{id:1,message:"1st post"},{id:2,message:"How is your s ds"},{id:3,message:"Hi"},{id:4,message:"yoo"}]},i=function(e){return{type:"dialogs/SEND_MESSAGE",messageText:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.SEND_MESSAGE:var n={id:6,message:t.messageText};return""!==t.messageText?Object(s.a)(Object(s.a)({},e),{},{messages:[].concat(Object(a.a)(e.messages),[n])}):e;default:return e}}},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n(0);var r=n(27),a=n.n(r),s=n(9),c=n(82),i=n(1),u=function(e){var t=e.user,n=e.follow,r=e.unfollow,u=e.followingInProgress;return Object(i.jsxs)("div",{className:a.a.grid,children:[Object(i.jsx)(s.b,{to:"/profile/".concat(t.id," "),children:Object(i.jsx)("img",{className:a.a.photo,src:null!==t.photos.small?t.photos.small:c.a,alt:"animated-user"})}),Object(i.jsx)("div",{className:a.a.follow,children:t.followed?Object(i.jsx)("button",{disabled:u.some((function(e){return e===t.id})),onClick:function(){r(t.id)},children:"Unfollow"}):Object(i.jsx)("button",{disabled:u.some((function(e){return e===t.id})),onClick:function(){n(t.id)},children:"follow"})}),Object(i.jsx)("div",{className:a.a.name,children:t.name}),Object(i.jsx)("div",{className:a.a.status,children:t.status})]},t.id)}},82:function(e,t,n){"use strict";t.a=n.p+"static/media/icons8-user-male.be2cd3f6.svg"},89:function(e,t,n){e.exports={footer:"Footer_footer__29X5M"}}},[[227,2,3]]]);
//# sourceMappingURL=main.e3dbab75.chunk.js.map